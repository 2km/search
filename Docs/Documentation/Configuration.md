Configuration
=============

Behavior and Model Configuration
--------------------------------

All search fields must be configured in the ```Model::$filterArgs``` array.

Each filter record should contain an array with several keys:

* **name:** The parameter stored in ```Model::$data```. The "name" used to search in a field (can be ommited if the key is the name).
* **type:** One of supported search types described below.
* **field:** Real field name used for search should be used.
* **method:** Model method name or behavior used to generate expression, subquery or query.
* **allowEmpty:** Optional parameter used to allow generating conditions even if the filter field value is empty. It is often used when you specifically allow a lookup for an empty string or if conditions need to be generated based on several other fields.

Supported Types of Search
-------------------------

* **like:** Type of search used when you need to search using the "LIKE" SQL keyword.
* **value:** Useful when you need to perform exact comparisons. For example, when using a select box as your filter.
* **expression:** Type useful if you want to add condition that will generate by some method, and condition field contain several parameter like in previous sample used for 'range'. Field here contains 'Article.views BETWEEN ? AND ?' and Article::makeRangeCondition returns array of two values.
* **subquery:** Type useful if you want to add condition that looks like FIELD IN (SUBQUERY), where SUBQUERY generated by method declared in this filter configuration.
* **query:** Most universal type of search. In this case method should return array(that contain condition of any complexity). Returned condition will be joined to whole search conditions.

Controller Configuration
------------------------

All search fields parameters need to configure in the ```Controller::presetVars``` array - if you didn't yet in the model.

Each preset variable is a array record that contains next keys:

* **field:** Field that defined in the view search form.
* **type:** One of search types:
* **value:** Should used for value that doesn't require any processing,
* **checkbox:** Used for checkbox fields in view (Prg component pack and unpack checkbox values when pass it through the get named action).
* **lookup:** This type used when you have autocomplete lookup field implemented in your view. This lookup field is a text field, and also you have hidden field id value. In this case component will fill both text and id values.
* **model:** Param that specifies what model used in Controller::data at a key for this field.
* **formField:** Field in the form that contain text, and will populated using model.modelField based on field value.
* **modelField:** Field in the model that contain text, and will used to fill formField in view.
* **encode:** Boolean, by default false. If you want to use search strings in URL's with special characters like % or / you need to use encoding
* **empty:** Boolean, by default false. If you want to omit this field in the PRG url if no value has been given (shorter urls).

**Note:** Those can also be configured in the model itself (to keep it DRY). You can then set ```$presetVar = true``` then in the controller to use the model ones (see the example above). You can still use define the keys here where you want to overwrite certain settings. When using named params instead of query strings it is recommended to always use ```encode => true``` in combination with search strings (custom text input) to avoid url-breaking.
